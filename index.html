<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<title>Ajax & Promise</title>		
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/league.css" id="theme">		
<!-- 		<link rel="stylesheet" href="lib/css/zenburn.css"> -->
	</head>

	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<img src="./image/ajax_logo.svg">
					<h1>AJAX & Promises</h1>
					<h3>HTML presentation</h3>
					
					<p><small>RSSchool. 2018Q3</small></p>										
				</section>
				<section>
					<section>
						<h2>Client & Server</h2>
						<img src="./image/client-server.png" width="500px">
						<p>Client sends requests... Server answers...</p>
					</section>
					<section>
						<h2>Traditional Web Application Model</h2>
						<img src="./image/tdaditional_model.jpg" width="800px">						
					</section>
					<section>
						<h2>Page is reloaded....</h2>
						<img src='./image/please-wait-.jpg'>
						<p>It was...</p>
						<p><small>And now it happens...</small></p>
					</section>
				</section>				
				<section>
					<section>
						<h2>AJAX</h2>
						<p>AJAX is a developer's dream, because you can:</p>
						<ul>
							<li>Read data from a web server - after the page has loaded</li>
							<li>Update a web page without reloading the page</li>
							<li>Send data to a web server - in the background</li>
						</ul>
												
					</section>
					<section>
						<h3>How it works</h3>
						<p>"Asynchronus Javascript and XML"</p>
						<img src = './image/ajax_model.jpg'>
					</section>
				</section>
				<section>
					<section>
					<h2>XMLHttpRequest</h2>
					<p>A browser built-in object...</p>
					<p>Syntax for creating an XMLHttpRequest object:</p>
					<pre><code class="hljs" data-trim contenteditable>
						const xhttp1 = new XMLHttpRequest();
						let xhttp2 = new XMLHttpRequest();
					</code></pre>
				    </section>
					<section>
						<h3>XMLHttpRequest Object Methods</h3>
						<img src="image/xhmhttpMethods.png" />
					</section>
					<section>
							<h3>XMLHttpRequest Object Properties</h3>
							<img src="image/xmlhttpProperty.png" />
					</section>
					<section>
						<h2>XMLHttpRequest example</h2>
						<pre><code class="hljs" data-trim contenteditable>
								function loadDoc() {
								  const xhttp = new XMLHttpRequest();
								  xhttp.onreadystatechange = function() {
									if (this.readyState == 4 && this.status == 200) {
									  document.getElementById("demo").innerHTML = this.responseText;
									}
								  };
								  xhttp.open("GET", "demo_get.asp", true);
								  xhttp.send();
								}
						</code></pre>
						<p>You can read more about it <a href="https://www.w3schools.com/js/js_ajax_intro.asp">there</a></p>
					</section>
				</section>	
				<section>
					<h3>AJAX & PROMISE</h3>
					<p>So. We already know what is Ajax...</p>
					<p>How about Promise ?</p>
				</section>			

				<section>
					<section>
						<h2>Promise</h2>
						<p>In our life</p>
						<p> it means to tell someone</p>
						<p>that you will certainly do something...</p>
						<h3>" I Promise, I will be better "</h3>
						<p><small>and often these are empty promises :(</small></p>
					</section>
					<section>
						<p>Javascript Promise is an object</p>

						<pre><code class="hljs" data-trim contenteditable>
							const promise = new Promise(function(resolve,reject) {
								 //any executor (xmlhttprequest for examle)
							});
					</code></pre>
					
						
						
					</section>
					<section>
						<p>Let us create a simple promise for our understanding sake.</p>
							<pre><code class="hljs" data-trim contenteditable>
									promise2 = new Promise(function(resolve, reject) {
										setTimeout(function() {
										  resolve({
											message: "The man likes to keep his word",
											code: "aManKeepsHisWord"
										  });
										}, 10 * 1000);
									  });
									  console.log(promise2);
							</code></pre>
							<p>Checkout</p> 
						
						<img src="image/console2.png" />
				
				</section>

				
					<section>
					<p>After 10 seconds</p>
					<img src="image/console3.png">
					</section>

					<section>
						<h3>Reject example</h3>
							<pre><code class="hljs" data-trim contenteditable>
									keepsHisWord = false;
									promise3 = new Promise(function(resolve, reject) {
  										if (keepsHisWord) {
   										    resolve("The man likes to keep his word");
 										} else {
    										reject("The man doesn't want to keep his word");
  										}
									});
									console.log(promise3);
							</code></pre>
							<p>Checkout</p> 
						
						<img src="./image/onsoleerror.png" />
												
					
				   </section>
				   <section>
					   <h3>There can be only a single result or an error</h3>
						<pre><code class="hljs" data-trim contenteditable>
								let promise = new Promise(function(resolve, reject) {
									resolve("done");
								  
									reject(new Error("…")); // ignored
									setTimeout(() => resolve("…")); // ignored
								  });
						</code></pre>

				   </section>
				   <section>
					   <h3>The state and result are internal</h3>
					   <p>We can’t directly access them from our “consuming code”. </p>
					   <p>We can use the methods  <em>.then/.catch</em>  for that.</p>
				   </section>
				</section>

				<section>
						<section>
								<h2>catch</h2>
								<p></p>
								<pre><code class="hljs" data-trim contenteditable>
										var promise1 = new Promise(function(resolve, reject) {
											throw 'Uh-oh!';
										  });
										  
										  promise1.catch(function(error) {
											console.log(error);
										  });
								</code></pre>
							</section>
					<section>
						<h2>then</h2>
						<p></p>
						<pre><code class="hljs" data-trim contenteditable>
								var p1 = new Promise( (resolve, reject) => {
									resolve('Success!');
									// or
									// reject(new Error("Error!"));
								  } );
								  
								  p1.then( value => {
									console.log(value); // Success!
								  }, reason => {
									console.log(reason); // Error!
								  } );
						</code></pre>
					</section>
					<section>
						<p>The then method returns a Promise which allows for method chaining</p>
						<pre><code class="hljs" data-trim contenteditable>
Promise.resolve('foo') 
  .then(function(string) {
    return new Promise(function(resolve, reject) {
      setTimeout(function() {
        string += 'bar';
        resolve(string);
      }, 1);
    });
  })
  .then(function(string) {
    setTimeout(function() {
      string += 'baz';
      console.log(string);
    }, 1)
    return string;
  })
  .then(function(string) {
    console.log("Last Then:  oops... didn't bother to instantiate and return " +
                "a promise in the prior then so the sequence may be a bit " +
                "surprising");

    console.log(string);
  });
						</code></pre>
					</section>
				</section>

				<section>
					<p>You can read about it here</p>
					<ul>
						<li><a href ="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise | MDN</a></li>
						<li><a href ="https://hackernoon.com/understanding-promises-in-javascript-13d99df067c1">Understanding Promise</a></li>
						<li><a href ="https://www.w3schools.com/js/js_ajax_intro.asp">Ajax | W3School</a></li>
						<li><a href ="https://www.w3schools.com/XML/xml_http.asp">XMLHttpRequest | W3School</a></li>
						
					</ul>
				</section>

				<section >
					<h1>THE END</h1>
					
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'convex', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
